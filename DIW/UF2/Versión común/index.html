<html>
    <head>
        <title>Activitat 2.2: El Roboprofe | Enric Arandes</title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>


    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                    <!-- <div>Current Time : <span  id="currentTime">0</span></div>
                     <div>Total time : <span id="totalTime">0</span></div> -->
					 
                    <video id="video" width="800" height="550" controls autoplay> <!-- muted -->
                        <!-- https://www.youtube.com/watch?v=my7g32_Kf_I -->
						<source src="media/Video.mp4" type="video/mp4">                
                        Your browser does not support the video tag.
                    </video>                
                </div>            
            </div>
            <div class="clearfix"></div>
            <script> 
                var vid = document.getElementById("video"); 
                /*
                    vid.play(); //Play         
                    vid.pause(); //Pause
                    vid.duration; //Duracion
                    vid.currentTime; //obtenemos el valor del video
                    vid.currentTime=120;
                 */  
                respuesta = [];
            
                $( document ).ready(function() {
                
                    $('#alerta').hide();
                    $('#btnEnviar').click(function(){
                    
                        var myRadio = $('input[type=radio]');
                        var checkedValue = myRadio.filter(':checked').val();
                    
                        //console.log(checkedValue);                    
                        //console.log($( "label[id='"+checkedValue+"']" ).text());  
                    
                        respuesta.push($( "label[id='"+checkedValue+"']" ).text());
                    console.log($("label[id='" + checkedValue + "']").text());
                        $('input[modo='+checkedValue+']').attr('checked', false);
                    
                        $('#myModal').modal('hide');
                        vid.play();
                    });
                });
            
                setInterval(function(){
                    //$('#currentTime').html($('.container').find('video').get(0).currentTime);
                    //$('#totalTime').html($('.container').find('video').get(0).duration); 
                
                    //MODAL 1
                    saltarmodals(7,"Si fueras dios, ¿que hariás?","Que la vida universitaria fuera eterna",
                    "Mariguana en todos lados","Las guerras yo las suprimiría");
                
                    //MODAL 2
                    saltarmodals(94,"¿Cómo llamarías a tu libro sagrado?","El libro del buen follador",
                    "Yo le llamaria 'Sara' ","Mil y una noche con Fran");
                                
                    //MODAL 3
                    saltarmodals(175,"¿Cuanto segundos tiene un minuto?","1 segundo",
                    "60 segundos","100 segundos");               
                
                    if(vid.currentTime ==  vid.duration){
                    
                        $('#alerta').show();
                        $('#respuesta1').html("Respuesta 1: "+respuesta[0]+"</br>");
                        $('#respuesta2').html("Respuesta 2: "+respuesta[1]+"</br>");
                        $('#respuesta3').html("Respuesta 3: "+respuesta[2]+"</br>");
                        /*for (var i = 0; i < respuesta.length; i++) {
                            console.log(respuesta[i]);                           
                        }*/
                    }
                    else{
                        $('#alerta').hide();
                    }
                },100);            
                function saltarmodals(tiempo, pregunta, respuesta1,respuesta2,respuesta3){
                
                    if(vid.currentTime > tiempo && vid.currentTime <(tiempo + 0.25)){
                        vid.pause();
                        $('#myModalLabel').text(pregunta);
                        $('#opcion1').text(respuesta1);
                        $('#opcion2').text(respuesta2);
                        $('#opcion3').text(respuesta3);
                    
                        $('#myModal').modal('show');
                        vid.currentTime = (tiempo + 0.26);
                    }
                }
            
            </script> 
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="static">
                <div class="modal-dialog">
                    <div class="modal-content fondosimple">
                        <div class="modal-header">                        
                            <h4 class="modal-title" id="myModalLabel"></h4>
                        </div>
                        <div class="modal-body">
                            <div class="radio">
                                <label>
                                    <input type="radio" modo="opcion1" name="opcion" id="opciones_1" value="opcion1">
                                    <label id="opcion1"></label>
                                </label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input type="radio" modo="opcion2" name="opcion" id="opciones_2" value="opcion2">
                                    <label id="opcion2"></label>
                                </label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input type="radio" modo="opcion3" name="opcion" id="opciones_3" value="opcion3">
                                    <label id="opcion3"></label>
                                </label>
                            </div>

                        </div>
                        <div class="modal-footer">
                            <button id="btnEnviar" type="submit" class="btn btn-success">Enviar</button>                        
                        </div>
                    </div>
                </div>
            </div>


            <div class="row">
                <div id="alerta" class="alert alert-dismissible alert-info">               
                    <span id="respuesta1"></span>
                    <span id="respuesta2"></span>
                    <span id="respuesta3"></span>
                </div>
            </div>
        </div>
    </body>
</html>